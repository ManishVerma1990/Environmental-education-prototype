<% layout('layout') -%>
<div class="d-flex justify-content-between align-items-center mb-3">
<h3>Lessons</h3>
<% if (user.role === 'teacher' || user.role === 'admin') { %>
<a class="btn btn-success" href="/lessons/create/new">Create Lesson</a>
<% } %>
</div>
<div class="row g-3">
<% lessons.forEach(l => { const res = JSON.parse(l.resources||'[]'); %>
<div class="col-md-6">
<div class="card h-100">
<div class="card-body">
<h5><a href="/lessons/<%= l.id %>"><%= l.title %></a></h5>
<p class="text-muted"><%= l.description %></p>
<span class="badge bg-secondary"><%= res.length %> resource(s)</span>
</div>
</div>
</div>
<% }) %>
</div>